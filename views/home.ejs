<!DOCTYPE html>
<html>
  <head>
    <!-- Compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <script src="https://kit.fontawesome.com/0ac84d4690.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>

    <!-- Custom Overrides -->
    <script src="/scripts.js"></script>
    <link rel="stylesheet" href="/style.css" />

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

  <body class="blue-grey lighten-5">
    <nav>
      <div class="nav-wrapper blue darken-3">
        <a href="#" class="brand-logo center">fileR</a>
      </div>
    </nav>
    <div class="preloader-background">
      <div class="preloader-wrapper big active">
        <div class="spinner-layer spinner-blue-only">
          <div class="circle-clipper left">
            <div class="circle"></div>
          </div>
          <div class="gap-patch">
            <div class="circle"></div>
          </div>
          <div class="circle-clipper right">
            <div class="circle"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <% docs.forEach(function(file){%>
      <div class="col s12 m6 l4">
        <div class="card" style="border-radius: 8px; height: 125px;">
          <div class="card-content row:last-child">
            <div class="row">
              <div class="col s9 m10 l10">
                <span
                  class="card-title"
                  style="white-space: nowrap;
            overflow: hidden; text-overflow:ellipsis;"
                  ><%= file.key %></span
                >
                <span class="new badge red" data-badge-caption=""
                  ><%= file.format %></span
                ><span class="new badge blue" data-badge-caption=""
                  ><%= file.size %> MB</span
                >
                <% file.tags.forEach(function(tag){%>
                <span
                  class="btn  btn-small orange accent-3"
                  style="border-radius: 8px;"
                >
                  <%= tag %>
                </span>
                <%}) %>
              </div>
              <div class="col s3 m2 l2">
                <% if(file.format == ".pdf") {%>
                <i class="far fa-file-pdf fa-5x"></i>
                <%} %> <% if(file.format == ".jpg" || file.format == ".tiff" ||
                file.format == ".png") {%>
                <i class="far fa-file-image fa-5x"></i>
                <%} %> <% if(file.format == ".mp3" || file.format == ".aac" ||
                file.format == ".wav" || file.format == ".m4a") {%>
                <i class="far fa-file-audio fa-5x"></i>
                <%} %> <% if(file.format == ".mp4" || file.format == ".avi" ||
                file.format == ".mkv") {%>
                <i class="far fa-file-video fa-5x"></i>
                <%} %> <% if(file.format == ".doc" || file.format == ".docx" ||
                file.format == ".odt") {%>
                <i class="far fa-file-word fa-5x"></i>
                <%} %> <% if(file.format == ".xlsx" || file.format == ".xlsm")
                {%>
                <i class="far fa-file-excel fa-5x"></i>
                <%} %> <% if(file.format == ".ppt") {%>
                <i class="far fa-file-powerpoint fa-5x"></i>
                <%} %>
              </div>
            </div>
          </div>
        </div>
      </div>
      <%} ) %>
    </div>

    <!-- Floating icon -->
    <div class="fixed-action-btn">
      <a
        class="btn-floating btn-large blue darken-3 modal-trigger"
        href="#uploadModal"
        ><i class="fas fa-upload"></i>
      </a>
    </div>

    <!-- Upload Modal -->
    <div id="uploadModal" class="modal" style="border-radius: 8px">
      <div class="modal-content">
        <h4>Upload file</h4>
        <form
          id="uploadForm"
          method="POST"
          action="/uploadFile"
          enctype="multipart/form-data"
        >
          <div class="file-field input-field">
            <div class="btn orange accent-3">
              <span>Select</span>
              <input type="file" name="fileToUpload" />
            </div>
            <div class="file-path-wrapper">
              <input class="file-path validate" type="text" />
            </div>
          </div>
          <div class="chips" id="tags">
            <input name="tags" class="custom-class" />
          </div>
          <div class="center-align">
            <button type="submit" class="btn blue darken-3" value="Upload file">
              Upload file <i class="fas fa-upload"></i>
            </button>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat"
          >Cancel</a
        >
      </div>
    </div>

    <!-- Compiled and minified JavaScript and JQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  </body>
</html>
